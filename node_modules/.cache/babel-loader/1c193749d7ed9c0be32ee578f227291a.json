{"ast":null,"code":"import _toConsumableArray from\"/home/kali/Desktop/Secure_Cloud_Computing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/kali/Desktop/Secure_Cloud_Computing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import{Button,Modal,Form}from\"react-bootstrap\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faShare}from\"@fortawesome/free-solid-svg-icons\";import{database,firestore}from\"../../firebase\";import{useAuth}from\"../../contexts/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ShareFolder(_ref){var currentFolder=_ref.currentFolder;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var emailRef=useRef();function openModal(){setOpen(true);}function closeModal(){setOpen(false);}function shareSubmit(e){e.preventDefault();try{if(currentFolder==null)return console.log(\"current user is null\");/*if (currentFolder !== ROOT_FOLDER) {\n        path.push({ name: currentFolder.name, id: currentFolder.id })\n        }*/database.folders.where(\"sharepath\",\"array-contains\",currentFolder.id).get().then(function(document){document.forEach(function(doc1){firestore.collection('users').doc(emailRef.current.value).get().then(function(doc){var user=[];user.push(doc.data().userid);var user1=[];user1.push(currentUser.uid);user=[].concat(_toConsumableArray(user),user1);firestore.collection('folders').doc(doc1.id).update({userId:user,shared:\"yes\"});firestore.collection('folders').doc(currentFolder.id).update({userId:user,shared:\"yes\"});});});});}catch(_unused){console.log(\"Failed to share\");}closeModal();}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:openModal,variant:\"outline-success\",size:\"sm\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faShare})}),/*#__PURE__*/_jsx(Modal,{show:open,onHide:closeModal,children:/*#__PURE__*/_jsxs(Form,{onSubmit:shareSubmit,children:[/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"User Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,required:true})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:closeModal,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"submit\",children:\"Enter\"})]})]})})]});}","map":{"version":3,"sources":["/home/kali/Desktop/Secure_Cloud_Computing/src/Component/Drive/Share.js"],"names":["React","useState","useRef","Button","Modal","Form","FontAwesomeIcon","faShare","database","firestore","useAuth","ShareFolder","currentFolder","open","setOpen","currentUser","emailRef","openModal","closeModal","shareSubmit","e","preventDefault","console","log","folders","where","id","get","then","document","forEach","doc1","collection","doc","current","value","user","push","data","userid","user1","uid","update","userId","shared"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\"\nimport { Button, Modal, Form } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faShare } from \"@fortawesome/free-solid-svg-icons\"\nimport { database, firestore } from \"../../firebase\"\nimport { useAuth } from \"../../contexts/AuthContext\"\n\nexport default function ShareFolder({ currentFolder }) {\n  const [open, setOpen] = useState(false)\n  const { currentUser } = useAuth()\n  const emailRef = useRef()\n\n  function openModal() {\n    setOpen(true)\n  }\n\n  function closeModal() {\n    setOpen(false)\n  }\n\n  function shareSubmit(e) {\n    e.preventDefault()\n\n    try {\n        if (currentFolder == null) return console.log(\"current user is null\")\n\n         /*if (currentFolder !== ROOT_FOLDER) {\n        path.push({ name: currentFolder.name, id: currentFolder.id })\n        }*/\n\n              \n          database.folders\n          .where(\"sharepath\", \"array-contains\", currentFolder.id)\n          .get()\n          .then( document => {\n            document.forEach((doc1) => {\n\n              firestore.collection('users').doc(emailRef.current.value).get().then(doc => {\n                var user = [];\n                user.push(doc.data().userid)    \n              var user1 = [];\n              user1.push(currentUser.uid)\n              user = [...user, ...user1]  \n                firestore.collection('folders').doc(doc1.id).update({\n                 userId: user,\n                 shared: \"yes\",\n              });\n              firestore.collection('folders').doc(currentFolder.id).update({\n                userId: user,\n                shared: \"yes\",\n             });\n            })\n            \n\n          })\n    });\n    } catch {\n    console.log(\"Failed to share\")\n      }\n    closeModal()\n  }\n\n\n  return (\n    <>\n      <Button onClick={openModal} variant=\"outline-success\" size=\"sm\">\n        <FontAwesomeIcon icon={faShare} />\n      </Button>\n      <Modal show={open} onHide={closeModal}>\n        <Form onSubmit={shareSubmit}>\n          <Modal.Body>\n            <Form.Group>\n              <Form.Label>User Email</Form.Label>\n              <Form.Control\n                type=\"email\"\n                ref={emailRef} required\n              />\n            </Form.Group>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={closeModal}>\n              Close\n            </Button>\n            <Button variant=\"success\" type=\"submit\">\n              Enter\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    </>\n  )\n}"]},"metadata":{},"sourceType":"module"}